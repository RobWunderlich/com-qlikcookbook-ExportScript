function init(qlik,download,dropzone){$("#com-qlikcookbook-ExportScript-scriptExport").click(function(){var engineApp=qlik.currApp(this).model.engineApp,filename=qlik.currApp(this).model.layout.qTitle+".txt";engineApp.getScript().then(function(reply){var script=reply.qScript,data="data:text/plain;charset=utf-8,"+encodeURIComponent(script);download(data,filename,"text/plain"),$("#scriptExportStatus").html("Script exported")})}),$("#com-qlikcookbook-ExportScript-scriptUpload").dropzone({url:"#",previewsContainer:!1,autoProcessQueue:!1,accept:function(file,done){var reader=new FileReader;reader.onload=function(){1==confirm("Confirm replace of application script with "+file.name+"?")?(qlik.currApp(this).model.engineApp.setScript(reader.result),$("#com-qlikcookbook-ExportScript-scriptExportStatus").html("Script replaced from "+file.name)):$("#com-qlikcookbook-ExportScript-scriptExportStatus").html("Script replace cancelled")},reader.readAsText(file),done()}})}define(["qlik","./lib/download","./lib/dropzone-amd-module","text!./com-qlikcookbook-ExportScript.html","css!./lib/css/com-qlikcookbook-ExportScript.css"],function(qlik,download,dropzone,html){var paintInitialized=!1;return{support:{snapshot:!1,export:!1,exportData:!1},paint:function($element,layout){paintInitialized||($element.html(html),init(qlik,download,dropzone),paintInitialized=!0)}}});